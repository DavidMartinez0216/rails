{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///activestorage.js","webpack:///webpack/bootstrap 4653908394abfa27562a","webpack:///./app/javascript/activestorage/helpers.js","webpack:///./app/javascript/activestorage/direct_upload.js","webpack:///./app/javascript/activestorage/index.js","webpack:///./app/javascript/activestorage/ujs.js","webpack:///./app/javascript/activestorage/direct_uploads_controller.js","webpack:///./app/javascript/activestorage/direct_upload_controller.js","webpack:///./app/javascript/activestorage/file_checksum.js","webpack:///./node_modules/spark-md5/spark-md5.js","webpack:///./app/javascript/activestorage/blob_record.js","webpack:///./app/javascript/activestorage/blob_upload.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","getMetaValue","element","findElement","document","head","getAttribute","findElements","selector","toArray","querySelectorAll","querySelector","dispatchEvent","type","eventInit","arguments","length","undefined","disabled","bubbles","cancelable","detail","event","createEvent","initEvent","value","Array","isArray","from","slice","_classCallCheck","instance","Constructor","TypeError","notify","methodName","_len","messages","_key","apply","DirectUpload","__WEBPACK_IMPORTED_MODULE_0__file_checksum__","__WEBPACK_IMPORTED_MODULE_1__blob_record__","__WEBPACK_IMPORTED_MODULE_2__blob_upload__","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","id","file","url","delegate","callback","_this","create","error","checksum","blob","xhr","upload","toJSON","autostart","window","ActiveStorage","__WEBPACK_IMPORTED_MODULE_0__ujs__","__WEBPACK_IMPORTED_MODULE_1__direct_upload__","setTimeout","start","started","addEventListener","didSubmitForm","didSubmitRemoteElement","handleFormSubmissionEvent","tagName","form","hasAttribute","processingAttribute","preventDefault","controller","__WEBPACK_IMPORTED_MODULE_0__direct_uploads_controller__","inputs","setAttribute","forEach","disable","removeAttribute","enable","submitForm","button","__WEBPACK_IMPORTED_MODULE_1__helpers__","_button","focus","click","createElement","style","appendChild","removeChild","input","DirectUploadsController","__WEBPACK_IMPORTED_MODULE_0__direct_upload_controller__","inputSelector","filter","files","controllers","createDirectUploadControllers","dispatch","startNextController","shift","push","DirectUploadController","__WEBPACK_IMPORTED_MODULE_0__direct_upload__","directUpload","hiddenInput","insertAdjacentElement","attributes","parentNode","dispatchError","signed_id","progress","loaded","total","defaultPrevented","alert","_this2","uploadRequestDidProgress","FileChecksum","__WEBPACK_IMPORTED_MODULE_0_spark_md5__","__WEBPACK_IMPORTED_MODULE_0_spark_md5___default","fileSlice","File","mozSlice","webkitSlice","chunkSize","chunkCount","Math","ceil","size","chunkIndex","md5Buffer","a","ArrayBuffer","fileReader","FileReader","fileReaderDidLoad","fileReaderDidError","readNextChunk","append","result","binaryDigest","end","base64digest","btoa","min","bytes","readAsArrayBuffer","md5cycle","x","k","b","md5blk","md5blks","charCodeAt","md5blk_array","md51","tail","tmp","lo","hi","state","substring","toString","match","parseInt","md51_array","subarray","Uint8Array","rhex","j","hex_chr","hex","join","toUtf8","str","test","unescape","encodeURIComponent","utf8Str2ArrayBuffer","returnUInt8Array","buff","arr","arrayBuffer2Utf8Str","String","fromCharCode","concatenateArrayBuffers","first","second","byteLength","set","buffer","hexToBinaryString","substr","SparkMD5","reset","y","lsw","clamp","val","max","to","num","targetArray","sourceArray","begin","appendBinary","contents","_buff","_length","_hash","raw","ret","_finish","getState","hash","setState","destroy","hashBinary","content","BlobRecord","__WEBPACK_IMPORTED_MODULE_0__helpers__","filename","content_type","byte_size","XMLHttpRequest","open","responseType","setRequestHeader","requestDidLoad","requestDidError","send","JSON","stringify","status","response","direct_upload","directUploadData","_xhr","parse","BlobUpload","_blob$directUploadDat","headers"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,cAAAD,IAEAD,EAAA,cAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAV,WAUA,OANAK,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,GAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAtB,GACA,GAAAe,GAAAf,KAAAuB,WACA,WAA2B,MAAAvB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAK,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,GAGAvB,IAAAwB,EAAA,KDgBM,SAAU7B,EAAQ8B,EAAqBzB,GAE7C,YE/EO,SAAS0B,GAAajB,GAC3B,GAAMkB,GAAUC,EAAYC,SAASC,KAArB,cAAyCrB,EAAzC,KAChB,IAAIkB,EACF,MAAOA,GAAQI,aAAa,WAIzB,QAASC,GAAaxC,EAAMyC,GAMjC,MALmB,gBAARzC,KACTyC,EAAWzC,EACXA,EAAOqC,UAGFK,EADU1C,EAAK2C,iBAAiBF,IAIlC,QAASL,GAAYpC,EAAMyC,GAKhC,MAJmB,gBAARzC,KACTyC,EAAWzC,EACXA,EAAOqC,UAEFrC,EAAK4C,cAAcH,GAGrB,QAASI,GAAcV,EAASW,GAAsB,GAAhBC,GAAgBC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,MACnDG,EAAahB,EAAbgB,SACAC,EAAgCL,EAAhCK,QAASC,EAAuBN,EAAvBM,WAAYC,EAAWP,EAAXO,OACvBC,EAAQlB,SAASmB,YAAY,QAEnCD,GAAME,UAAUX,EAAMM,IAAW,EAAMC,IAAc,GACrDE,EAAMD,OAASA,KAEf,KACEnB,EAAQgB,UAAW,EACnBhB,EAAQU,cAAcU,GAFxB,QAIEpB,EAAQgB,SAAWA,EAGrB,MAAOI,GAGF,QAASb,GAAQgB,GACtB,MAAIC,OAAMC,QAAQF,GACTA,EACEC,MAAME,KACRF,MAAME,KAAKH,MAERI,MAAMjD,KAAK6C,GFgCQzB,EAAuB,EAAIC,EAC3BD,EAAuB,EAAIO,EAC3BP,EAAuB,EAAIG,EAC3BH,EAAuB,EAAIY,EAC3BZ,EAAuB,EAAIS,GA2DtD,SAAUvC,EAAQ8B,EAAqBzB,GAE7C,YAOA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCGnHhH,QAASC,GAAOxC,EAAQyC,GACtB,GAAIzC,GAAuC,kBAAtBA,GAAOyC,GAA2B,QAAAC,GAAArB,UAAAC,OADlBqB,EACkBX,MAAAU,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IADlBD,EACkBC,EAAA,GAAAvB,UAAAuB,EACrD,OAAO5C,GAAOyC,GAAPI,MAAA7C,EAAsB2C,IH2GF9D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOwC,IAC9E,IAAIC,GAA+ClE,EAAoB,GACnEmE,EAA6CnE,EAAoB,GACjEoE,EAA6CpE,EAAoB,GACtFqE,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MGlJ5hBqB,EAAK,EAEIb,EAAb,WACE,QAAAA,GAAYc,EAAMC,EAAKC,GAAU1B,EAAAzD,KAAAmE,GAC/BnE,KAAKgF,KAAOA,EACZhF,KAAKiF,KAAOA,EACZjF,KAAKkF,IAAMA,EACXlF,KAAKmF,SAAWA,EALpB,MAAAZ,GAAAJ,IAAAU,IAAA,SAAAzB,MAAA,SAQSgC,GAAU,GAAAC,GAAArF,IACfoE,GAAA,EAAakB,OAAOtF,KAAKiF,KAAM,SAACM,EAAOC,GACrC,GAAMC,GAAO,GAAIpB,GAAA,EAAWgB,EAAKJ,KAAMO,EAAUH,EAAKH,IACtDrB,GAAOwB,EAAKF,SAAU,oCAAqCM,EAAKC,KAChED,EAAKH,OAAO,SAAAC,GACV,GAAIA,EACFH,EAASG,OACJ,CACL,GAAMI,GAAS,GAAIrB,GAAA,EAAWmB,EAC9B5B,GAAOwB,EAAKF,SAAU,mCAAoCQ,EAAOD,KACjEC,EAAOL,OAAO,SAAAC,GACRA,EACFH,EAASG,GAETH,EAAS,KAAMK,EAAKG,qBAtBlCzB,MH8MM,SAAUtE,EAAQ8B,EAAqBzB,GAE7C,YIlNA,SAAS2F,KACHC,OAAOC,eACTjF,OAAAkF,EAAA,KJiNJlF,OAAOC,eAAeY,EAAqB,cAAgByB,OAAO,GAC7C,IAAI4C,GAAqC9F,EAAoB,GACzD+F,EAA+C/F,EAAoB,EAC3DA,GAAoBQ,EAAEiB,EAAqB,QAAS,WAAa,MAAOqE,GAAsC,IAC9G9F,EAAoBQ,EAAEiB,EAAqB,eAAgB,WAAa,MAAOsE,GAAgD,IIjNhKC,WAAWL,EAAW,IJgOhB,SAAUhG,EAAQ8B,EAAqBzB,GAE7C,YKtOO,SAASiG,KACTC,IACHA,GAAU,EACVrE,SAASsE,iBAAiB,SAAUC,GACpCvE,SAASsE,iBAAiB,cAAeE,IAI7C,QAASD,GAAcrD,GACrBuD,EAA0BvD,GAG5B,QAASsD,GAAuBtD,GACF,QAAxBA,EAAMwB,OAAOgC,SACfD,EAA0BvD,GAI9B,QAASuD,GAA0BvD,GACjC,GAAMyD,GAAOzD,EAAMwB,MAEnB,IAAIiC,EAAKC,aAAaC,GAEpB,WADA3D,GAAM4D,gBAIR,IAAMC,GAAa,GAAIC,GAAA,EAAwBL,GACvCM,EAAWF,EAAXE,MAEJA,GAAOrE,SACTM,EAAM4D,iBACNH,EAAKO,aAAaL,EAAqB,IACvCI,EAAOE,QAAQC,GACfL,EAAWX,MAAM,SAAAZ,GACfmB,EAAKU,gBAAgBR,GACjBrB,EACFyB,EAAOE,QAAQG,GAEfC,EAAWZ,MAMnB,QAASY,GAAWZ,GAClB,GAAIa,GAASzG,OAAA0G,EAAA,GAAYd,EAAM,qBAC/B,IAAIa,EAAQ,IAAAE,GACWF,EAAb1E,EADE4E,EACF5E,QACR0E,GAAO1E,UAAW,EAClB0E,EAAOG,QACPH,EAAOI,QACPJ,EAAO1E,SAAWA,MAElB0E,GAASxF,SAAS6F,cAAc,SAChCL,EAAO/E,KAAO,SACd+E,EAAOM,MAAQ,eACfnB,EAAKoB,YAAYP,GACjBA,EAAOI,QACPjB,EAAKqB,YAAYR,GAIrB,QAASJ,GAAQa,GACfA,EAAMnF,UAAW,EAGnB,QAASwE,GAAOW,GACdA,EAAMnF,UAAW,ELoKclB,EAAuB,EAAIwE,CACvC,IAAIY,GAA2D7G,EAAoB,GAC/EsH,EAAyCtH,EAAoB,GK5OhF0G,EAAsB,iCACxBR,GAAU,GL6TR,SAAUvG,EAAQ8B,EAAqBzB,GAE7C,YAMA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCALjF1D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOsG,IAC9E,IAAIC,GAA0DhI,EAAoB,GAC9EsH,EAAyCtH,EAAoB,GAClFqE,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MMpU1hBwE,EAAgB,2DAETF,EAAb,WACE,QAAAA,GAAYvB,GAAMjD,EAAAzD,KAAAiI,GAChBjI,KAAK0G,KAAOA,EACZ1G,KAAKgH,OAASlG,OAAA0G,EAAA,GAAad,EAAMyB,GAAeC,OAAO,SAAAJ,GAAA,MAASA,GAAMK,MAAM1F,SAHhF,MAAA4B,GAAA0D,IAAApD,IAAA,QAAAzB,MAAA,SAMQgC,GAAU,GAAAC,GAAArF,KACRsI,EAActI,KAAKuI,+BAmBzBvI,MAAKwI,SAAS,SAjBc,QAAtBC,KACJ,GAAM3B,GAAawB,EAAYI,OAC3B5B,GACFA,EAAWX,MAAM,SAAAZ,GACXA,GACFH,EAASG,GACTF,EAAKmD,SAAS,QAEdC,OAIJrD,IACAC,EAAKmD,SAAS,cAtBtB3D,IAAA,gCAAAzB,MAAA,WA+BI,GAAMkF,KAON,OANAtI,MAAKgH,OAAOE,QAAQ,SAAAc,GAClBlH,OAAA0G,EAAA,GAAQQ,EAAMK,OAAOnB,QAAQ,SAAAjC,GAC3B,GAAM6B,GAAa,GAAIoB,GAAA,EAAuBF,EAAO/C,EACrDqD,GAAYK,KAAK7B,OAGdwB,KAtCXzD,IAAA,WAAAzB,MAAA,SAyCWzC,GAAmB,GAAbqC,GAAaN,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,KAC1B,OAAO5B,QAAA0G,EAAA,GAAcxH,KAAK0G,KAAnB,kBAA2C/F,GAAUqC,eA1ChEiF,MN0YM,SAAUpI,EAAQ8B,EAAqBzB,GAE7C,YAMA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCALjF1D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOiH,IAC9E,IAAIC,GAA+C3I,EAAoB,GACnEsH,EAAyCtH,EAAoB,GAClFqE,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MOlZnhBiF,EAAb,WACE,QAAAA,GAAYZ,EAAO/C,GAAMxB,EAAAzD,KAAA4I,GACvB5I,KAAKgI,MAAQA,EACbhI,KAAKiF,KAAOA,EACZjF,KAAK8I,aAAe,GAAID,GAAA,EAAa7I,KAAKiF,KAAMjF,KAAKkF,IAAKlF,MAC1DA,KAAKwI,SAAS,cALlB,MAAAjE,GAAAqE,IAAA/D,IAAA,QAAAzB,MAAA,SAQQgC,GAAU,GAAAC,GAAArF,KACR+I,EAAchH,SAAS6F,cAAc,QAC3CmB,GAAYvG,KAAO,SACnBuG,EAAYpI,KAAOX,KAAKgI,MAAMrH,KAC9BX,KAAKgI,MAAMgB,sBAAsB,cAAeD,GAEhD/I,KAAKwI,SAAS,SAEdxI,KAAK8I,aAAaxD,OAAO,SAACC,EAAO0D,GAC3B1D,GACFwD,EAAYG,WAAWnB,YAAYgB,GACnC1D,EAAK8D,cAAc5D,IAEnBwD,EAAY3F,MAAQ6F,EAAWG,UAGjC/D,EAAKmD,SAAS,OACdpD,EAASG,QAzBfV,IAAA,2BAAAzB,MAAA,SA6B2BH,GACvB,GAAMoG,GAAWpG,EAAMqG,OAASrG,EAAMsG,MAAQ,GAC1CF,IACFrJ,KAAKwI,SAAS,YAAca,gBAhClCxE,IAAA,WAAAzB,MAAA,SAwCWzC,GAAmB,GAAbqC,GAAaN,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,KAG1B,OAFAM,GAAOiC,KAAOjF,KAAKiF,KACnBjC,EAAOgC,GAAKhF,KAAK8I,aAAa9D,GACvBlE,OAAA0G,EAAA,GAAcxH,KAAKgI,MAAnB,iBAA2CrH,GAAUqC,cA3ChE6B,IAAA,gBAAAzB,MAAA,SA8CgBmC,GACEvF,KAAKwI,SAAS,SAAWjD,UAC5BiE,kBACTC,MAAMlE,MAjDZV,IAAA,oCAAAzB,MAAA,SAuDoCsC,GAChC1F,KAAKwI,SAAS,uBAAyB9C,WAxD3Cb,IAAA,mCAAAzB,MAAA,SA2DmCsC,GAAK,GAAAgE,GAAA1J,IACpCA,MAAKwI,SAAS,0BAA4B9C,QAC1CA,EAAIC,OAAOU,iBAAiB,WAAY,SAAApD,GAAA,MAASyG,GAAKC,yBAAyB1G,QA7DnF4B,IAAA,MAAA3D,IAAA,WAqCI,MAAOlB,MAAKgI,MAAM/F,aAAa,8BArCnC2G,MPkfM,SAAU/I,EAAQ8B,EAAqBzB,GAE7C,YAMA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCALjF1D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOiI,IAC9E,IAAIC,GAA0C3J,EAAoB,GAC9D4J,EAAkD5J,EAAoBiB,EAAE0I,GAC7FtF,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MQzf1hBoG,EAAYC,KAAKzI,UAAUiC,OAASwG,KAAKzI,UAAU0I,UAAYD,KAAKzI,UAAU2I,YAEvEN,EAAb,WAME,QAAAA,GAAY3E,GAAMxB,EAAAzD,KAAA4J,GAChB5J,KAAKiF,KAAOA,EACZjF,KAAKmK,UAAY,QACjBnK,KAAKoK,WAAaC,KAAKC,KAAKtK,KAAKiF,KAAKsF,KAAOvK,KAAKmK,WAClDnK,KAAKwK,WAAa,EAVtB,MAAAjG,GAAAqF,EAAA,OAAA/E,IAAA,SAAAzB,MAAA,SACgB6B,EAAMG,GACD,GAAIwE,GAAa3E,GACzBK,OAAOF,OAHpBb,EAAAqF,IAAA/E,IAAA,SAAAzB,MAAA,SAaSgC,GAAU,GAAAC,GAAArF,IACfA,MAAKoF,SAAWA,EAChBpF,KAAKyK,UAAY,GAAIX,GAAAY,EAASC,YAC9B3K,KAAK4K,WAAa,GAAIC,YACtB7K,KAAK4K,WAAWvE,iBAAiB,OAAQ,SAAApD,GAAA,MAASoC,GAAKyF,kBAAkB7H,KACzEjD,KAAK4K,WAAWvE,iBAAiB,QAAS,SAAApD,GAAA,MAASoC,GAAK0F,mBAAmB9H,KAC3EjD,KAAKgL,mBAnBTnG,IAAA,oBAAAzB,MAAA,SAsBoBH,GAGhB,GAFAjD,KAAKyK,UAAUQ,OAAOhI,EAAMwB,OAAOyG,SAE9BlL,KAAKgL,gBAAiB,CACzB,GAAMG,GAAenL,KAAKyK,UAAUW,KAAI,GAClCC,EAAeC,KAAKH,EAC1BnL,MAAKoF,SAAS,KAAMiG,OA5B1BxG,IAAA,qBAAAzB,MAAA,SAgCqBH,GACjBjD,KAAKoF,SAAL,iBAA+BpF,KAAKiF,KAAKtE,SAjC7CkE,IAAA,gBAAAzB,MAAA,WAqCI,GAAIpD,KAAKwK,WAAaxK,KAAKoK,WAAY,CACrC,GAAMjE,GAAQnG,KAAKwK,WAAaxK,KAAKmK,UAC/BiB,EAAMf,KAAKkB,IAAIpF,EAAQnG,KAAKmK,UAAWnK,KAAKiF,KAAKsF,MACjDiB,EAAQzB,EAAUxJ,KAAKP,KAAKiF,KAAMkB,EAAOiF,EAG/C,OAFApL,MAAK4K,WAAWa,kBAAkBD,GAClCxL,KAAKwK,cACE,EAEP,OAAO,MA7CbZ,MRskBM,SAAU/J,EAAQD,EAASM,IS1kBjC,SAAAP,GAGAE,EAAAD,QAAAD,KAgBC,SAAAiD,GAED,YA0BA,SAAA8I,GAAAC,EAAAC,GACA,GAAAlB,GAAAiB,EAAA,GACAE,EAAAF,EAAA,GACAlL,EAAAkL,EAAA,GACAjL,EAAAiL,EAAA,EAEAjB,KAAAmB,EAAApL,GAAAoL,EAAAnL,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,GAAAnB,EAAAjK,GAAAmL,EAAA,eACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,GAAAhK,EAAAmL,GAAAD,EAAA,eACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,GAAAD,EAAAiK,GAAAkB,EAAA,gBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAApL,GAAAoL,EAAAnL,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,GAAAnB,EAAAjK,GAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,GAAAhK,EAAAmL,GAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,GAAAD,EAAAiK,GAAAkB,EAAA,cACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAApL,GAAAoL,EAAAnL,GAAAkL,EAAA,gBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,GAAAnB,EAAAjK,GAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,GAAAhK,EAAAmL,GAAAD,EAAA,YACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,GAAAD,EAAAiK,GAAAkB,EAAA,iBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAApL,GAAAoL,EAAAnL,GAAAkL,EAAA,iBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,GAAAnB,EAAAjK,GAAAmL,EAAA,eACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,GAAAhK,EAAAmL,GAAAD,EAAA,iBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,GAAAD,EAAAiK,GAAAkB,EAAA,iBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EAEAiK,IAAAmB,EAAAnL,EAAAD,GAAAC,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAjK,EAAAoL,GAAApL,GAAAmL,EAAA,gBACAlL,MAAA,EAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAmL,EAAAnB,GAAAmB,GAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAiK,EAAAhK,GAAAgK,GAAAkB,EAAA,eACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAAnL,EAAAD,GAAAC,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAjK,EAAAoL,GAAApL,GAAAmL,EAAA,eACAlL,MAAA,EAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAmL,EAAAnB,GAAAmB,GAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAiK,EAAAhK,GAAAgK,GAAAkB,EAAA,eACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAAnL,EAAAD,GAAAC,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAjK,EAAAoL,GAAApL,GAAAmL,EAAA,iBACAlL,MAAA,EAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAmL,EAAAnB,GAAAmB,GAAAD,EAAA,eACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAiK,EAAAhK,GAAAgK,GAAAkB,EAAA,gBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAmB,EAAAnL,EAAAD,GAAAC,GAAAkL,EAAA,iBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAjK,EAAAoL,GAAApL,GAAAmL,EAAA,cACAlL,MAAA,EAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAmL,EAAAnB,GAAAmB,GAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAiK,EAAAhK,GAAAgK,GAAAkB,EAAA,iBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EAEAiK,IAAAmB,EAAApL,EAAAC,GAAAkL,EAAA,YACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,EAAApL,GAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,EAAAmB,GAAAD,EAAA,iBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,EAAAgK,GAAAkB,EAAA,eACAC,MAAA,GAAAA,IAAA,GAAApL,EAAA,EACAiK,IAAAmB,EAAApL,EAAAC,GAAAkL,EAAA,gBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,EAAApL,GAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,EAAAmB,GAAAD,EAAA,eACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,EAAAgK,GAAAkB,EAAA,iBACAC,MAAA,GAAAA,IAAA,GAAApL,EAAA,EACAiK,IAAAmB,EAAApL,EAAAC,GAAAkL,EAAA,gBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,EAAApL,GAAAmL,EAAA,eACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,EAAAmB,GAAAD,EAAA,eACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,EAAAgK,GAAAkB,EAAA,cACAC,MAAA,GAAAA,IAAA,GAAApL,EAAA,EACAiK,IAAAmB,EAAApL,EAAAC,GAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAgK,EAAAmB,EAAApL,GAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAC,EAAAgK,EAAAmB,GAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAApL,EAAAC,EAAAgK,GAAAkB,EAAA,eACAC,MAAA,GAAAA,IAAA,GAAApL,EAAA,EAEAiK,IAAAjK,GAAAoL,GAAAnL,IAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAmL,GAAAnB,GAAAjK,IAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAiK,GAAAhK,GAAAmL,IAAAD,EAAA,iBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAAnL,GAAAD,GAAAiK,IAAAkB,EAAA,cACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAjK,GAAAoL,GAAAnL,IAAAkL,EAAA,iBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAmL,GAAAnB,GAAAjK,IAAAmL,EAAA,gBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAiK,GAAAhK,GAAAmL,IAAAD,EAAA,cACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAAnL,GAAAD,GAAAiK,IAAAkB,EAAA,gBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAjK,GAAAoL,GAAAnL,IAAAkL,EAAA,gBACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAmL,GAAAnB,GAAAjK,IAAAmL,EAAA,eACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAiK,GAAAhK,GAAAmL,IAAAD,EAAA,gBACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAAnL,GAAAD,GAAAiK,IAAAkB,EAAA,iBACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EACAiK,IAAAjK,GAAAoL,GAAAnL,IAAAkL,EAAA,eACAlB,MAAA,EAAAA,IAAA,IAAAmB,EAAA,EACAnL,IAAAmL,GAAAnB,GAAAjK,IAAAmL,EAAA,iBACAlL,MAAA,GAAAA,IAAA,IAAAgK,EAAA,EACAjK,IAAAiK,GAAAhK,GAAAmL,IAAAD,EAAA,eACAnL,MAAA,GAAAA,IAAA,IAAAC,EAAA,EACAmL,IAAAnL,GAAAD,GAAAiK,IAAAkB,EAAA,eACAC,MAAA,GAAAA,IAAA,IAAApL,EAAA,EAEAkL,EAAA,GAAAjB,EAAAiB,EAAA,KACAA,EAAA,GAAAE,EAAAF,EAAA,KACAA,EAAA,GAAAlL,EAAAkL,EAAA,KACAA,EAAA,GAAAjL,EAAAiL,EAAA,KAGA,QAAAG,GAAApK,GACA,GACArB,GADA0L,IAGA,KAAA1L,EAAA,EAAmBA,EAAA,GAAQA,GAAA,EAC3B0L,EAAA1L,GAAA,GAAAqB,EAAAsK,WAAA3L,IAAAqB,EAAAsK,WAAA3L,EAAA,QAAAqB,EAAAsK,WAAA3L,EAAA,SAAAqB,EAAAsK,WAAA3L,EAAA,OAEA,OAAA0L,GAGA,QAAAE,GAAAvB,GACA,GACArK,GADA0L,IAGA,KAAA1L,EAAA,EAAmBA,EAAA,GAAQA,GAAA,EAC3B0L,EAAA1L,GAAA,GAAAqK,EAAArK,IAAAqK,EAAArK,EAAA,QAAAqK,EAAArK,EAAA,SAAAqK,EAAArK,EAAA,OAEA,OAAA0L,GAGA,QAAAG,GAAAxK,GACA,GAEArB,GACAsC,EACAwJ,EACAC,EACAC,EACAC,EAPAnL,EAAAO,EAAAiB,OACA4J,GAAA,4CAQA,KAAAlM,EAAA,GAAoBA,GAAAc,EAAQd,GAAA,GAC5BqL,EAAAa,EAAAT,EAAApK,EAAA8K,UAAAnM,EAAA,GAAAA,IAKA,KAHAqB,IAAA8K,UAAAnM,EAAA,IACAsC,EAAAjB,EAAAiB,OACAwJ,GAAA,iCACA9L,EAAA,EAAmBA,EAAAsC,EAAYtC,GAAA,EAC/B8L,EAAA9L,GAAA,IAAAqB,EAAAsK,WAAA3L,OAAA,KAGA,IADA8L,EAAA9L,GAAA,UAAAA,EAAA,MACAA,EAAA,GAEA,IADAqL,EAAAa,EAAAJ,GACA9L,EAAA,EAAuBA,EAAA,GAAQA,GAAA,EAC/B8L,EAAA9L,GAAA,CAcA,OATA+L,GAAA,EAAAjL,EACAiL,IAAAK,SAAA,IAAAC,MAAA,kBACAL,EAAAM,SAAAP,EAAA,OACAE,EAAAK,SAAAP,EAAA,UAEAD,EAAA,IAAAE,EACAF,EAAA,IAAAG,EAEAZ,EAAAa,EAAAJ,GACAI,EAGA,QAAAK,GAAAlC,GACA,GAEArK,GACAsC,EACAwJ,EACAC,EACAC,EACAC,EAPAnL,EAAAuJ,EAAA/H,OACA4J,GAAA,4CAQA,KAAAlM,EAAA,GAAoBA,GAAAc,EAAQd,GAAA,GAC5BqL,EAAAa,EAAAN,EAAAvB,EAAAmC,SAAAxM,EAAA,GAAAA,IAWA,KAJAqK,EAAArK,EAAA,GAAAc,EAAAuJ,EAAAmC,SAAAxM,EAAA,OAAAyM,YAAA,GAEAnK,EAAA+H,EAAA/H,OACAwJ,GAAA,iCACA9L,EAAA,EAAmBA,EAAAsC,EAAYtC,GAAA,EAC/B8L,EAAA9L,GAAA,IAAAqK,EAAArK,OAAA,KAIA,IADA8L,EAAA9L,GAAA,UAAAA,EAAA,MACAA,EAAA,GAEA,IADAqL,EAAAa,EAAAJ,GACA9L,EAAA,EAAuBA,EAAA,GAAQA,GAAA,EAC/B8L,EAAA9L,GAAA,CAeA,OAVA+L,GAAA,EAAAjL,EACAiL,IAAAK,SAAA,IAAAC,MAAA,kBACAL,EAAAM,SAAAP,EAAA,OACAE,EAAAK,SAAAP,EAAA,UAEAD,EAAA,IAAAE,EACAF,EAAA,IAAAG,EAEAZ,EAAAa,EAAAJ,GAEAI,EAGA,QAAAQ,GAAA5L,GACA,GACA6L,GADAtL,EAAA,EAEA,KAAAsL,EAAA,EAAmBA,EAAA,EAAOA,GAAA,EAC1BtL,GAAAuL,EAAA9L,GAAA,EAAA6L,EAAA,MAAAC,EAAA9L,GAAA,EAAA6L,EAAA,GAEA,OAAAtL,GAGA,QAAAwL,GAAAvB,GACA,GAAAtL,EACA,KAAAA,EAAA,EAAmBA,EAAAsL,EAAAhJ,OAActC,GAAA,EACjCsL,EAAAtL,GAAA0M,EAAApB,EAAAtL,GAEA,OAAAsL,GAAAwB,KAAA,IAmEA,QAAAC,GAAAC,GAKA,MAJA,kBAAAC,KAAAD,KACAA,EAAAE,SAAAC,mBAAAH,KAGAA,EAGA,QAAAI,GAAAJ,EAAAK,GACA,GAGArN,GAHAsC,EAAA0K,EAAA1K,OACAgL,EAAA,GAAAhD,aAAAhI,GACAiL,EAAA,GAAAd,YAAAa,EAGA,KAAAtN,EAAA,EAAmBA,EAAAsC,EAAYtC,GAAA,EAC/BuN,EAAAvN,GAAAgN,EAAArB,WAAA3L,EAGA,OAAAqN,GAAAE,EAAAD,EAGA,QAAAE,GAAAF,GACA,MAAAG,QAAAC,aAAA7J,MAAA,QAAA4I,YAAAa,IAGA,QAAAK,GAAAC,EAAAC,EAAAR,GACA,GAAAxC,GAAA,GAAA4B,YAAAmB,EAAAE,WAAAD,EAAAC,WAKA,OAHAjD,GAAAkD,IAAA,GAAAtB,YAAAmB,IACA/C,EAAAkD,IAAA,GAAAtB,YAAAoB,GAAAD,EAAAE,YAEAT,EAAAxC,IAAAmD,OAGA,QAAAC,GAAApB,GACA,GAEAvB,GAFAH,KACA7I,EAAAuK,EAAAvK,MAGA,KAAAgJ,EAAA,EAAmBA,EAAAhJ,EAAA,EAAgBgJ,GAAA,EACnCH,EAAA7C,KAAAgE,SAAAO,EAAAqB,OAAA5C,EAAA,OAGA,OAAAmC,QAAAC,aAAA7J,MAAA4J,OAAAtC,GAYA,QAAAgD,KAEAxO,KAAAyO,QAjZA,GAGAxB,IAAA,gEAssBA,OAhbA,qCAAAC,EAAAhB,EAAA,WACA,SAAAP,EAAA+C,GACA,GAAAC,IAAA,MAAAhD,IAAA,MAAA+C,EAEA,QADA/C,GAAA,KAAA+C,GAAA,KAAAC,GAAA,KACA,SAAAA,GAYA,mBAAAhE,0BAAApJ,UAAAiC,OACA,WACA,QAAAoL,GAAAC,EAAAlM,GAGA,MAFAkM,GAAA,EAAAA,GAAA,EAEAA,EAAA,EACAxE,KAAAyE,IAAAD,EAAAlM,EAAA,GAGA0H,KAAAkB,IAAAsD,EAAAlM,GAGAgI,YAAApJ,UAAAiC,MAAA,SAAAD,EAAAwL,GACA,GAGAC,GACAvK,EACAwK,EACAC,EANAvM,EAAA3C,KAAAmO,WACAgB,EAAAP,EAAArL,EAAAZ,GACAyI,EAAAzI,CAUA,OAJAoM,KAAAnM,IACAwI,EAAAwD,EAAAG,EAAApM,IAGAwM,EAAA/D,EACA,GAAAT,aAAA,IAGAqE,EAAA5D,EAAA+D,EACA1K,EAAA,GAAAkG,aAAAqE,GACAC,EAAA,GAAAnC,YAAArI,GAEAyK,EAAA,GAAApC,YAAA9M,KAAAmP,EAAAH,GACAC,EAAAb,IAAAc,GAEAzK,OA+EA+J,EAAAjN,UAAA0J,OAAA,SAAAoC,GAKA,MAFArN,MAAAoP,aAAAhC,EAAAC,IAEArN,MAUAwO,EAAAjN,UAAA6N,aAAA,SAAAC,GACArP,KAAAsP,OAAAD,EACArP,KAAAuP,SAAAF,EAAA1M,MAEA,IACAtC,GADAsC,EAAA3C,KAAAsP,MAAA3M,MAGA,KAAAtC,EAAA,GAAoBA,GAAAsC,EAAatC,GAAA,GACjCqL,EAAA1L,KAAAwP,MAAA1D,EAAA9L,KAAAsP,MAAA9C,UAAAnM,EAAA,GAAAA,IAKA,OAFAL,MAAAsP,MAAAtP,KAAAsP,MAAA9C,UAAAnM,EAAA,IAEAL,MAWAwO,EAAAjN,UAAA6J,IAAA,SAAAqE,GACA,GAEApP,GAEAqP,EAJA/B,EAAA3N,KAAAsP,MACA3M,EAAAgL,EAAAhL,OAEAwJ,GAAA,gCAGA,KAAA9L,EAAA,EAAmBA,EAAAsC,EAAYtC,GAAA,EAC/B8L,EAAA9L,GAAA,IAAAsN,EAAA3B,WAAA3L,OAAA,KAYA,OATAL,MAAA2P,QAAAxD,EAAAxJ,GACA+M,EAAAxC,EAAAlN,KAAAwP,OAEAC,IACAC,EAAApB,EAAAoB,IAGA1P,KAAAyO,QAEAiB,GAQAlB,EAAAjN,UAAAkN,MAAA,WAKA,MAJAzO,MAAAsP,MAAA,GACAtP,KAAAuP,QAAA,EACAvP,KAAAwP,OAAA,6CAEAxP,MAQAwO,EAAAjN,UAAAqO,SAAA,WACA,OACAjC,KAAA3N,KAAAsP,MACA3M,OAAA3C,KAAAuP,QACAM,KAAA7P,KAAAwP,QAWAhB,EAAAjN,UAAAuO,SAAA,SAAAvD,GAKA,MAJAvM,MAAAsP,MAAA/C,EAAAoB,KACA3N,KAAAuP,QAAAhD,EAAA5J,OACA3C,KAAAwP,MAAAjD,EAAAsD,KAEA7P,MAOAwO,EAAAjN,UAAAwO,QAAA,iBACA/P,MAAAwP,YACAxP,MAAAsP,YACAtP,MAAAuP,SASAf,EAAAjN,UAAAoO,QAAA,SAAAxD,EAAAxJ,GACA,GACAyJ,GACAC,EACAC,EAHAjM,EAAAsC,CAMA,IADAwJ,EAAA9L,GAAA,UAAAA,EAAA,MACAA,EAAA,GAEA,IADAqL,EAAA1L,KAAAwP,MAAArD,GACA9L,EAAA,EAAuBA,EAAA,GAAQA,GAAA,EAC/B8L,EAAA9L,GAAA,CAMA+L,GAAA,EAAApM,KAAAuP,QACAnD,IAAAK,SAAA,IAAAC,MAAA,kBACAL,EAAAM,SAAAP,EAAA,OACAE,EAAAK,SAAAP,EAAA,UAEAD,EAAA,IAAAE,EACAF,EAAA,IAAAG,EACAZ,EAAA1L,KAAAwP,MAAArD,IAYAqC,EAAAqB,KAAA,SAAAxC,EAAAoC,GAGA,MAAAjB,GAAAwB,WAAA5C,EAAAC,GAAAoC,IAWAjB,EAAAwB,WAAA,SAAAC,EAAAR,GACA,GAAAI,GAAA3D,EAAA+D,GACAP,EAAAxC,EAAA2C,EAEA,OAAAJ,GAAAnB,EAAAoB,MAUAlB,EAAA7D,YAAA,WAEA3K,KAAAyO,SAUAD,EAAA7D,YAAApJ,UAAA0J,OAAA,SAAA2C,GACA,GAEAvN,GAFAsN,EAAAK,EAAAhO,KAAAsP,MAAAjB,OAAAT,GAAA,GACAjL,EAAAgL,EAAAhL,MAKA,KAFA3C,KAAAuP,SAAA3B,EAAAO,WAEA9N,EAAA,GAAoBA,GAAAsC,EAAatC,GAAA,GACjCqL,EAAA1L,KAAAwP,MAAAvD,EAAA0B,EAAAd,SAAAxM,EAAA,GAAAA,IAKA,OAFAL,MAAAsP,MAAAjP,EAAA,GAAAsC,EAAA,GAAAmK,YAAAa,EAAAU,OAAA7K,MAAAnD,EAAA,QAAAyM,YAAA,GAEA9M,MAWAwO,EAAA7D,YAAApJ,UAAA6J,IAAA,SAAAqE,GACA,GAGApP,GACAqP,EAJA/B,EAAA3N,KAAAsP,MACA3M,EAAAgL,EAAAhL,OACAwJ,GAAA,gCAIA,KAAA9L,EAAA,EAAmBA,EAAAsC,EAAYtC,GAAA,EAC/B8L,EAAA9L,GAAA,IAAAsN,EAAAtN,OAAA,KAYA,OATAL,MAAA2P,QAAAxD,EAAAxJ,GACA+M,EAAAxC,EAAAlN,KAAAwP,OAEAC,IACAC,EAAApB,EAAAoB,IAGA1P,KAAAyO,QAEAiB,GAQAlB,EAAA7D,YAAApJ,UAAAkN,MAAA,WAKA,MAJAzO,MAAAsP,MAAA,GAAAxC,YAAA,GACA9M,KAAAuP,QAAA,EACAvP,KAAAwP,OAAA,6CAEAxP,MAQAwO,EAAA7D,YAAApJ,UAAAqO,SAAA,WACA,GAAArD,GAAAiC,EAAAjN,UAAAqO,SAAArP,KAAAP,KAKA,OAFAuM,GAAAoB,KAAAE,EAAAtB,EAAAoB,MAEApB,GAUAiC,EAAA7D,YAAApJ,UAAAuO,SAAA,SAAAvD,GAIA,MAFAA,GAAAoB,KAAAF,EAAAlB,EAAAoB,MAAA,GAEAa,EAAAjN,UAAAuO,SAAAvP,KAAAP,KAAAuM,IAGAiC,EAAA7D,YAAApJ,UAAAwO,QAAAvB,EAAAjN,UAAAwO,QAEAvB,EAAA7D,YAAApJ,UAAAoO,QAAAnB,EAAAjN,UAAAoO,QAUAnB,EAAA7D,YAAAkF,KAAA,SAAAjC,EAAA6B,GACA,GAAAI,GAAAjD,EAAA,GAAAE,YAAAc,IACA8B,EAAAxC,EAAA2C,EAEA,OAAAJ,GAAAnB,EAAAoB,MAGAlB,KTklBM,SAAU3O,EAAQ8B,EAAqBzB,GAE7C,YAKA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAJjF1D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAOuO,IAC9E,IAAIC,GAAyCjQ,EAAoB,GAClFqE,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MUl0CnhBuM,EAAb,WACE,QAAAA,GAAYjL,EAAMO,EAAUN,GAAK,GAAAG,GAAArF,IAAAyD,GAAAzD,KAAAkQ,GAC/BlQ,KAAKiF,KAAOA,EAEZjF,KAAKiJ,YACHmH,SAAUnL,EAAKtE,KACf0P,aAAcpL,EAAKzC,KACnB8N,UAAWrL,EAAKsF,KAChB/E,SAAUA,GAGZxF,KAAK0F,IAAM,GAAI6K,gBACfvQ,KAAK0F,IAAI8K,KAAK,OAAQtL,GAAK,GAC3BlF,KAAK0F,IAAI+K,aAAe,OACxBzQ,KAAK0F,IAAIgL,iBAAiB,eAAgB,oBAC1C1Q,KAAK0F,IAAIgL,iBAAiB,SAAU,oBACpC1Q,KAAK0F,IAAIgL,iBAAiB,mBAAoB,kBAC9C1Q,KAAK0F,IAAIgL,iBAAiB,eAAgB5P,OAAAqP,EAAA,GAAa,eACvDnQ,KAAK0F,IAAIW,iBAAiB,OAAQ,SAAApD,GAAA,MAASoC,GAAKsL,eAAe1N,KAC/DjD,KAAK0F,IAAIW,iBAAiB,QAAS,SAAApD,GAAA,MAASoC,GAAKuL,gBAAgB3N,KAnBrE,MAAAsB,GAAA2L,IAAArL,IAAA,SAAAzB,MAAA,SAoCSgC,GACLpF,KAAKoF,SAAWA,EAChBpF,KAAK0F,IAAImL,KAAKC,KAAKC,WAAYtL,KAAMzF,KAAKiJ,iBAtC9CpE,IAAA,iBAAAzB,MAAA,SAyCiBH,GACb,GAAIjD,KAAKgR,QAAU,KAAOhR,KAAKgR,OAAS,IAAK,IACnCC,GAAajR,KAAbiR,SACAC,EAAkBD,EAAlBC,oBACDD,GAASC,cAChBlR,KAAKiJ,WAAagI,EAClBjR,KAAKmR,iBAAmBD,EACxBlR,KAAKoF,SAAS,KAAMpF,KAAK4F,cAEzB5F,MAAK4Q,gBAAgB3N,MAlD3B4B,IAAA,kBAAAzB,MAAA,SAsDkBH,GACdjD,KAAKoF,SAAL,4BAA0CpF,KAAKiF,KAAKtE,KAApD,cAAsEX,KAAKgR,WAvD/EnM,IAAA,SAAAzB,MAAA,WA2DI,GAAM8H,KACN,KAAK,GAAMrG,KAAO7E,MAAKiJ,WACrBiC,EAAOrG,GAAO7E,KAAKiJ,WAAWpE,EAEhC,OAAOqG,MA/DXrG,IAAA,SAAA3D,IAAA,WAuBI,MAAOlB,MAAK0F,IAAIsL,UAvBpBnM,IAAA,WAAA3D,IAAA,WA0BiB,GAAAkQ,GACsBpR,KAAK0F,IAAhC+K,EADKW,EACLX,aAAcQ,EADTG,EACSH,QACtB,OAAoB,QAAhBR,EACKQ,EAGAH,KAAKO,MAAMJ,OAhCxBf,MVm6CM,SAAUrQ,EAAQ8B,EAAqBzB,GAE7C,YAIA,SAASuD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAHjF1D,EAAoBQ,EAAEiB,EAAqB,IAAK,WAAa,MAAO2P,IACnG,IAAI/M,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrE,GAAI,EAAGA,EAAIqE,EAAM/B,OAAQtC,IAAK,CAAE,GAAIsE,GAAaD,EAAMrE,EAAIsE,GAAW1D,WAAa0D,EAAW1D,aAAc,EAAO0D,EAAW3D,cAAe,EAAU,SAAW2D,KAAYA,EAAWC,UAAW,GAAM9D,OAAOC,eAAe0D,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUhB,EAAamB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBb,EAAYpC,UAAWuD,GAAiBC,GAAaP,EAAiBb,EAAaoB,GAAqBpB,MWz6CnhB2N,EAAb,WACE,QAAAA,GAAY7L,GAAM,GAAAJ,GAAArF,IAAAyD,GAAAzD,KAAAsR,GAChBtR,KAAKyF,KAAOA,EACZzF,KAAKiF,KAAOQ,EAAKR,IAFD,IAAAsM,GAIS9L,EAAK0L,iBAAtBjM,EAJQqM,EAIRrM,IAAKsM,EAJGD,EAIHC,OAEbxR,MAAK0F,IAAM,GAAI6K,gBACfvQ,KAAK0F,IAAI8K,KAAK,MAAOtL,GAAK,GAC1BlF,KAAK0F,IAAI+K,aAAe,MACxB,KAAK,GAAM5L,KAAO2M,GAChBxR,KAAK0F,IAAIgL,iBAAiB7L,EAAK2M,EAAQ3M,GAEzC7E,MAAK0F,IAAIW,iBAAiB,OAAQ,SAAApD,GAAA,MAASoC,GAAKsL,eAAe1N,KAC/DjD,KAAK0F,IAAIW,iBAAiB,QAAS,SAAApD,GAAA,MAASoC,GAAKuL,gBAAgB3N,KAdrE,MAAAsB,GAAA+M,IAAAzM,IAAA,SAAAzB,MAAA,SAiBSgC,GACLpF,KAAKoF,SAAWA,EAChBpF,KAAK0F,IAAImL,KAAK7Q,KAAKiF,SAnBvBJ,IAAA,iBAAAzB,MAAA,SAsBiBH,GAAO,GAAAmO,GACSpR,KAAK0F,IAA1BsL,EADYI,EACZJ,OAAQC,EADIG,EACJH,QACZD,IAAU,KAAOA,EAAS,IAC5BhR,KAAKoF,SAAS,KAAM6L,GAEpBjR,KAAK4Q,gBAAgB3N,MA3B3B4B,IAAA,kBAAAzB,MAAA,SA+BkBH,GACdjD,KAAKoF,SAAL,kBAAgCpF,KAAKiF,KAAKtE,KAA1C,cAA4DX,KAAK0F,IAAIsL,YAhCzEM","file":"activestorage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ActiveStorage\"] = factory();\n\telse\n\t\troot[\"ActiveStorage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ActiveStorage\"] = factory();\n\telse\n\t\troot[\"ActiveStorage\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getMetaValue;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = findElements;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = findElement;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = dispatchEvent;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = toArray;\nfunction getMetaValue(name) {\n  var element = findElement(document.head, \"meta[name=\\\"\" + name + \"\\\"]\");\n  if (element) {\n    return element.getAttribute(\"content\");\n  }\n}\n\nfunction findElements(root, selector) {\n  if (typeof root == \"string\") {\n    selector = root;\n    root = document;\n  }\n  var elements = root.querySelectorAll(selector);\n  return toArray(elements);\n}\n\nfunction findElement(root, selector) {\n  if (typeof root == \"string\") {\n    selector = root;\n    root = document;\n  }\n  return root.querySelector(selector);\n}\n\nfunction dispatchEvent(element, type) {\n  var eventInit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var disabled = element.disabled;\n  var bubbles = eventInit.bubbles,\n      cancelable = eventInit.cancelable,\n      detail = eventInit.detail;\n\n  var event = document.createEvent(\"Event\");\n\n  event.initEvent(type, bubbles || true, cancelable || true);\n  event.detail = detail || {};\n\n  try {\n    element.disabled = false;\n    element.dispatchEvent(event);\n  } finally {\n    element.disabled = disabled;\n  }\n\n  return event;\n}\n\nfunction toArray(value) {\n  if (Array.isArray(value)) {\n    return value;\n  } else if (Array.from) {\n    return Array.from(value);\n  } else {\n    return [].slice.call(value);\n  }\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DirectUpload; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__file_checksum__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__blob_record__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__blob_upload__ = __webpack_require__(9);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nvar id = 0;\n\nvar DirectUpload = function () {\n  function DirectUpload(file, url, delegate) {\n    _classCallCheck(this, DirectUpload);\n\n    this.id = ++id;\n    this.file = file;\n    this.url = url;\n    this.delegate = delegate;\n  }\n\n  _createClass(DirectUpload, [{\n    key: \"create\",\n    value: function create(callback) {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_0__file_checksum__[\"a\" /* FileChecksum */].create(this.file, function (error, checksum) {\n        var blob = new __WEBPACK_IMPORTED_MODULE_1__blob_record__[\"a\" /* BlobRecord */](_this.file, checksum, _this.url);\n        notify(_this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr);\n        blob.create(function (error) {\n          if (error) {\n            callback(error);\n          } else {\n            var upload = new __WEBPACK_IMPORTED_MODULE_2__blob_upload__[\"a\" /* BlobUpload */](blob);\n            notify(_this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr);\n            upload.create(function (error) {\n              if (error) {\n                callback(error);\n              } else {\n                callback(null, blob.toJSON());\n              }\n            });\n          }\n        });\n      });\n    }\n  }]);\n\n  return DirectUpload;\n}();\n\nfunction notify(object, methodName) {\n  if (object && typeof object[methodName] == \"function\") {\n    for (var _len = arguments.length, messages = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      messages[_key - 2] = arguments[_key];\n    }\n\n    return object[methodName].apply(object, messages);\n  }\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ujs__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__direct_upload__ = __webpack_require__(1);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"start\", function() { return __WEBPACK_IMPORTED_MODULE_0__ujs__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"DirectUpload\", function() { return __WEBPACK_IMPORTED_MODULE_1__direct_upload__[\"a\"]; });\n\n\n\n\nfunction autostart() {\n  if (window.ActiveStorage) {\n    Object(__WEBPACK_IMPORTED_MODULE_0__ujs__[\"a\" /* start */])();\n  }\n}\n\nsetTimeout(autostart, 1);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = start;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__direct_uploads_controller__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helpers__ = __webpack_require__(0);\n\n\n\nvar processingAttribute = \"data-direct-uploads-processing\";\nvar started = false;\n\nfunction start() {\n  if (!started) {\n    started = true;\n    document.addEventListener(\"submit\", didSubmitForm);\n    document.addEventListener(\"ajax:before\", didSubmitRemoteElement);\n  }\n}\n\nfunction didSubmitForm(event) {\n  handleFormSubmissionEvent(event);\n}\n\nfunction didSubmitRemoteElement(event) {\n  if (event.target.tagName == \"FORM\") {\n    handleFormSubmissionEvent(event);\n  }\n}\n\nfunction handleFormSubmissionEvent(event) {\n  var form = event.target;\n\n  if (form.hasAttribute(processingAttribute)) {\n    event.preventDefault();\n    return;\n  }\n\n  var controller = new __WEBPACK_IMPORTED_MODULE_0__direct_uploads_controller__[\"a\" /* DirectUploadsController */](form);\n  var inputs = controller.inputs;\n\n\n  if (inputs.length) {\n    event.preventDefault();\n    form.setAttribute(processingAttribute, \"\");\n    inputs.forEach(disable);\n    controller.start(function (error) {\n      form.removeAttribute(processingAttribute);\n      if (error) {\n        inputs.forEach(enable);\n      } else {\n        submitForm(form);\n      }\n    });\n  }\n}\n\nfunction submitForm(form) {\n  var button = Object(__WEBPACK_IMPORTED_MODULE_1__helpers__[\"b\" /* findElement */])(form, \"input[type=submit]\");\n  if (button) {\n    var _button = button,\n        disabled = _button.disabled;\n\n    button.disabled = false;\n    button.focus();\n    button.click();\n    button.disabled = disabled;\n  } else {\n    button = document.createElement(\"input\");\n    button.type = \"submit\";\n    button.style = \"display:none\";\n    form.appendChild(button);\n    button.click();\n    form.removeChild(button);\n  }\n}\n\nfunction disable(input) {\n  input.disabled = true;\n}\n\nfunction enable(input) {\n  input.disabled = false;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DirectUploadsController; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__direct_upload_controller__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\";\n\nvar DirectUploadsController = function () {\n  function DirectUploadsController(form) {\n    _classCallCheck(this, DirectUploadsController);\n\n    this.form = form;\n    this.inputs = Object(__WEBPACK_IMPORTED_MODULE_1__helpers__[\"c\" /* findElements */])(form, inputSelector).filter(function (input) {\n      return input.files.length;\n    });\n  }\n\n  _createClass(DirectUploadsController, [{\n    key: \"start\",\n    value: function start(callback) {\n      var _this = this;\n\n      var controllers = this.createDirectUploadControllers();\n\n      var startNextController = function startNextController() {\n        var controller = controllers.shift();\n        if (controller) {\n          controller.start(function (error) {\n            if (error) {\n              callback(error);\n              _this.dispatch(\"end\");\n            } else {\n              startNextController();\n            }\n          });\n        } else {\n          callback();\n          _this.dispatch(\"end\");\n        }\n      };\n\n      this.dispatch(\"start\");\n      startNextController();\n    }\n  }, {\n    key: \"createDirectUploadControllers\",\n    value: function createDirectUploadControllers() {\n      var controllers = [];\n      this.inputs.forEach(function (input) {\n        Object(__WEBPACK_IMPORTED_MODULE_1__helpers__[\"e\" /* toArray */])(input.files).forEach(function (file) {\n          var controller = new __WEBPACK_IMPORTED_MODULE_0__direct_upload_controller__[\"a\" /* DirectUploadController */](input, file);\n          controllers.push(controller);\n        });\n      });\n      return controllers;\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(name) {\n      var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return Object(__WEBPACK_IMPORTED_MODULE_1__helpers__[\"a\" /* dispatchEvent */])(this.form, \"direct-uploads:\" + name, { detail: detail });\n    }\n  }]);\n\n  return DirectUploadsController;\n}();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DirectUploadController; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__direct_upload__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar DirectUploadController = function () {\n  function DirectUploadController(input, file) {\n    _classCallCheck(this, DirectUploadController);\n\n    this.input = input;\n    this.file = file;\n    this.directUpload = new __WEBPACK_IMPORTED_MODULE_0__direct_upload__[\"a\" /* DirectUpload */](this.file, this.url, this);\n    this.dispatch(\"initialize\");\n  }\n\n  _createClass(DirectUploadController, [{\n    key: \"start\",\n    value: function start(callback) {\n      var _this = this;\n\n      var hiddenInput = document.createElement(\"input\");\n      hiddenInput.type = \"hidden\";\n      hiddenInput.name = this.input.name;\n      this.input.insertAdjacentElement(\"beforebegin\", hiddenInput);\n\n      this.dispatch(\"start\");\n\n      this.directUpload.create(function (error, attributes) {\n        if (error) {\n          hiddenInput.parentNode.removeChild(hiddenInput);\n          _this.dispatchError(error);\n        } else {\n          hiddenInput.value = attributes.signed_id;\n        }\n\n        _this.dispatch(\"end\");\n        callback(error);\n      });\n    }\n  }, {\n    key: \"uploadRequestDidProgress\",\n    value: function uploadRequestDidProgress(event) {\n      var progress = event.loaded / event.total * 100;\n      if (progress) {\n        this.dispatch(\"progress\", { progress: progress });\n      }\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(name) {\n      var detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      detail.file = this.file;\n      detail.id = this.directUpload.id;\n      return Object(__WEBPACK_IMPORTED_MODULE_1__helpers__[\"a\" /* dispatchEvent */])(this.input, \"direct-upload:\" + name, { detail: detail });\n    }\n  }, {\n    key: \"dispatchError\",\n    value: function dispatchError(error) {\n      var event = this.dispatch(\"error\", { error: error });\n      if (!event.defaultPrevented) {\n        alert(error);\n      }\n    }\n\n    // DirectUpload delegate\n\n  }, {\n    key: \"directUploadWillCreateBlobWithXHR\",\n    value: function directUploadWillCreateBlobWithXHR(xhr) {\n      this.dispatch(\"before-blob-request\", { xhr: xhr });\n    }\n  }, {\n    key: \"directUploadWillStoreFileWithXHR\",\n    value: function directUploadWillStoreFileWithXHR(xhr) {\n      var _this2 = this;\n\n      this.dispatch(\"before-storage-request\", { xhr: xhr });\n      xhr.upload.addEventListener(\"progress\", function (event) {\n        return _this2.uploadRequestDidProgress(event);\n      });\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this.input.getAttribute(\"data-direct-upload-url\");\n    }\n  }]);\n\n  return DirectUploadController;\n}();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FileChecksum; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_spark_md5__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_spark_md5___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_spark_md5__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;\n\nvar FileChecksum = function () {\n  _createClass(FileChecksum, null, [{\n    key: \"create\",\n    value: function create(file, callback) {\n      var instance = new FileChecksum(file);\n      instance.create(callback);\n    }\n  }]);\n\n  function FileChecksum(file) {\n    _classCallCheck(this, FileChecksum);\n\n    this.file = file;\n    this.chunkSize = 2097152; // 2MB\n    this.chunkCount = Math.ceil(this.file.size / this.chunkSize);\n    this.chunkIndex = 0;\n  }\n\n  _createClass(FileChecksum, [{\n    key: \"create\",\n    value: function create(callback) {\n      var _this = this;\n\n      this.callback = callback;\n      this.md5Buffer = new __WEBPACK_IMPORTED_MODULE_0_spark_md5___default.a.ArrayBuffer();\n      this.fileReader = new FileReader();\n      this.fileReader.addEventListener(\"load\", function (event) {\n        return _this.fileReaderDidLoad(event);\n      });\n      this.fileReader.addEventListener(\"error\", function (event) {\n        return _this.fileReaderDidError(event);\n      });\n      this.readNextChunk();\n    }\n  }, {\n    key: \"fileReaderDidLoad\",\n    value: function fileReaderDidLoad(event) {\n      this.md5Buffer.append(event.target.result);\n\n      if (!this.readNextChunk()) {\n        var binaryDigest = this.md5Buffer.end(true);\n        var base64digest = btoa(binaryDigest);\n        this.callback(null, base64digest);\n      }\n    }\n  }, {\n    key: \"fileReaderDidError\",\n    value: function fileReaderDidError(event) {\n      this.callback(\"Error reading \" + this.file.name);\n    }\n  }, {\n    key: \"readNextChunk\",\n    value: function readNextChunk() {\n      if (this.chunkIndex < this.chunkCount) {\n        var start = this.chunkIndex * this.chunkSize;\n        var end = Math.min(start + this.chunkSize, this.file.size);\n        var bytes = fileSlice.call(this.file, start, end);\n        this.fileReader.readAsArrayBuffer(bytes);\n        this.chunkIndex++;\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }]);\n\n  return FileChecksum;\n}();\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function (factory) {\n    if (true) {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BlobRecord; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar BlobRecord = function () {\n  function BlobRecord(file, checksum, url) {\n    var _this = this;\n\n    _classCallCheck(this, BlobRecord);\n\n    this.file = file;\n\n    this.attributes = {\n      filename: file.name,\n      content_type: file.type,\n      byte_size: file.size,\n      checksum: checksum\n    };\n\n    this.xhr = new XMLHttpRequest();\n    this.xhr.open(\"POST\", url, true);\n    this.xhr.responseType = \"json\";\n    this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    this.xhr.setRequestHeader(\"Accept\", \"application/json\");\n    this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n    this.xhr.setRequestHeader(\"X-CSRF-Token\", Object(__WEBPACK_IMPORTED_MODULE_0__helpers__[\"d\" /* getMetaValue */])(\"csrf-token\"));\n    this.xhr.addEventListener(\"load\", function (event) {\n      return _this.requestDidLoad(event);\n    });\n    this.xhr.addEventListener(\"error\", function (event) {\n      return _this.requestDidError(event);\n    });\n  }\n\n  _createClass(BlobRecord, [{\n    key: \"create\",\n    value: function create(callback) {\n      this.callback = callback;\n      this.xhr.send(JSON.stringify({ blob: this.attributes }));\n    }\n  }, {\n    key: \"requestDidLoad\",\n    value: function requestDidLoad(event) {\n      if (this.status >= 200 && this.status < 300) {\n        var response = this.response;\n        var direct_upload = response.direct_upload;\n\n        delete response.direct_upload;\n        this.attributes = response;\n        this.directUploadData = direct_upload;\n        this.callback(null, this.toJSON());\n      } else {\n        this.requestDidError(event);\n      }\n    }\n  }, {\n    key: \"requestDidError\",\n    value: function requestDidError(event) {\n      this.callback(\"Error creating Blob for \\\"\" + this.file.name + \"\\\". Status: \" + this.status);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var result = {};\n      for (var key in this.attributes) {\n        result[key] = this.attributes[key];\n      }\n      return result;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this.xhr.status;\n    }\n  }, {\n    key: \"response\",\n    get: function get() {\n      var _xhr = this.xhr,\n          responseType = _xhr.responseType,\n          response = _xhr.response;\n\n      if (responseType == \"json\") {\n        return response;\n      } else {\n        // Shim for IE 11: https://connect.microsoft.com/IE/feedback/details/794808\n        return JSON.parse(response);\n      }\n    }\n  }]);\n\n  return BlobRecord;\n}();\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BlobUpload; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BlobUpload = function () {\n  function BlobUpload(blob) {\n    var _this = this;\n\n    _classCallCheck(this, BlobUpload);\n\n    this.blob = blob;\n    this.file = blob.file;\n\n    var _blob$directUploadDat = blob.directUploadData,\n        url = _blob$directUploadDat.url,\n        headers = _blob$directUploadDat.headers;\n\n\n    this.xhr = new XMLHttpRequest();\n    this.xhr.open(\"PUT\", url, true);\n    this.xhr.responseType = \"text\";\n    for (var key in headers) {\n      this.xhr.setRequestHeader(key, headers[key]);\n    }\n    this.xhr.addEventListener(\"load\", function (event) {\n      return _this.requestDidLoad(event);\n    });\n    this.xhr.addEventListener(\"error\", function (event) {\n      return _this.requestDidError(event);\n    });\n  }\n\n  _createClass(BlobUpload, [{\n    key: \"create\",\n    value: function create(callback) {\n      this.callback = callback;\n      this.xhr.send(this.file);\n    }\n  }, {\n    key: \"requestDidLoad\",\n    value: function requestDidLoad(event) {\n      var _xhr = this.xhr,\n          status = _xhr.status,\n          response = _xhr.response;\n\n      if (status >= 200 && status < 300) {\n        this.callback(null, response);\n      } else {\n        this.requestDidError(event);\n      }\n    }\n  }, {\n    key: \"requestDidError\",\n    value: function requestDidError(event) {\n      this.callback(\"Error storing \\\"\" + this.file.name + \"\\\". Status: \" + this.xhr.status);\n    }\n  }]);\n\n  return BlobUpload;\n}();\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// activestorage.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4653908394abfa27562a","export function getMetaValue(name) {\n  const element = findElement(document.head, `meta[name=\"${name}\"]`)\n  if (element) {\n    return element.getAttribute(\"content\")\n  }\n}\n\nexport function findElements(root, selector) {\n  if (typeof root == \"string\") {\n    selector = root\n    root = document\n  }\n  const elements = root.querySelectorAll(selector)\n  return toArray(elements)\n}\n\nexport function findElement(root, selector) {\n  if (typeof root == \"string\") {\n    selector = root\n    root = document\n  }\n  return root.querySelector(selector)\n}\n\nexport function dispatchEvent(element, type, eventInit = {}) {\n  const { disabled } = element\n  const { bubbles, cancelable, detail } = eventInit\n  const event = document.createEvent(\"Event\")\n\n  event.initEvent(type, bubbles || true, cancelable || true)\n  event.detail = detail || {}\n\n  try {\n    element.disabled = false\n    element.dispatchEvent(event)\n  } finally {\n    element.disabled = disabled\n  }\n\n  return event\n}\n\nexport function toArray(value) {\n  if (Array.isArray(value)) {\n    return value\n  } else if (Array.from) {\n    return Array.from(value)\n  } else {\n    return [].slice.call(value)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/helpers.js","import { FileChecksum } from \"./file_checksum\"\nimport { BlobRecord } from \"./blob_record\"\nimport { BlobUpload } from \"./blob_upload\"\n\nlet id = 0\n\nexport class DirectUpload {\n  constructor(file, url, delegate) {\n    this.id = ++id\n    this.file = file\n    this.url = url\n    this.delegate = delegate\n  }\n\n  create(callback) {\n    FileChecksum.create(this.file, (error, checksum) => {\n      const blob = new BlobRecord(this.file, checksum, this.url)\n      notify(this.delegate, \"directUploadWillCreateBlobWithXHR\", blob.xhr)\n      blob.create(error => {\n        if (error) {\n          callback(error)\n        } else {\n          const upload = new BlobUpload(blob)\n          notify(this.delegate, \"directUploadWillStoreFileWithXHR\", upload.xhr)\n          upload.create(error => {\n            if (error) {\n              callback(error)\n            } else {\n              callback(null, blob.toJSON())\n            }\n          })\n        }\n      })\n    })\n  }\n}\n\nfunction notify(object, methodName, ...messages) {\n  if (object && typeof object[methodName] == \"function\") {\n    return object[methodName](...messages)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/direct_upload.js","import { start } from \"./ujs\"\nimport { DirectUpload } from \"./direct_upload\"\nexport { start, DirectUpload }\n\nfunction autostart() {\n  if (window.ActiveStorage) {\n    start()\n  }\n}\n\nsetTimeout(autostart, 1)\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/index.js","import { DirectUploadsController } from \"./direct_uploads_controller\"\nimport { findElement } from \"./helpers\"\n\nconst processingAttribute = \"data-direct-uploads-processing\"\nlet started = false\n\nexport function start() {\n  if (!started) {\n    started = true\n    document.addEventListener(\"submit\", didSubmitForm)\n    document.addEventListener(\"ajax:before\", didSubmitRemoteElement)\n  }\n}\n\nfunction didSubmitForm(event) {\n  handleFormSubmissionEvent(event)\n}\n\nfunction didSubmitRemoteElement(event) {\n  if (event.target.tagName == \"FORM\") {\n    handleFormSubmissionEvent(event)\n  }\n}\n\nfunction handleFormSubmissionEvent(event) {\n  const form = event.target\n\n  if (form.hasAttribute(processingAttribute)) {\n    event.preventDefault()\n    return\n  }\n\n  const controller = new DirectUploadsController(form)\n  const { inputs } = controller\n\n  if (inputs.length) {\n    event.preventDefault()\n    form.setAttribute(processingAttribute, \"\")\n    inputs.forEach(disable)\n    controller.start(error => {\n      form.removeAttribute(processingAttribute)\n      if (error) {\n        inputs.forEach(enable)\n      } else {\n        submitForm(form)\n      }\n    })\n  }\n}\n\nfunction submitForm(form) {\n  let button = findElement(form, \"input[type=submit]\")\n  if (button) {\n    const { disabled } = button\n    button.disabled = false\n    button.focus()\n    button.click()\n    button.disabled = disabled\n  } else {\n    button = document.createElement(\"input\")\n    button.type = \"submit\"\n    button.style = \"display:none\"\n    form.appendChild(button)\n    button.click()\n    form.removeChild(button)\n  }\n}\n\nfunction disable(input) {\n  input.disabled = true\n}\n\nfunction enable(input) {\n  input.disabled = false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/ujs.js","import { DirectUploadController } from \"./direct_upload_controller\"\nimport { findElements, dispatchEvent, toArray } from \"./helpers\"\n\nconst inputSelector = \"input[type=file][data-direct-upload-url]:not([disabled])\"\n\nexport class DirectUploadsController {\n  constructor(form) {\n    this.form = form\n    this.inputs = findElements(form, inputSelector).filter(input => input.files.length)\n  }\n\n  start(callback) {\n    const controllers = this.createDirectUploadControllers()\n\n    const startNextController = () => {\n      const controller = controllers.shift()\n      if (controller) {\n        controller.start(error => {\n          if (error) {\n            callback(error)\n            this.dispatch(\"end\")\n          } else {\n            startNextController()\n          }\n        })\n      } else {\n        callback()\n        this.dispatch(\"end\")\n      }\n    }\n\n    this.dispatch(\"start\")\n    startNextController()\n  }\n\n  createDirectUploadControllers() {\n    const controllers = []\n    this.inputs.forEach(input => {\n      toArray(input.files).forEach(file => {\n        const controller = new DirectUploadController(input, file)\n        controllers.push(controller)\n      })\n    })\n    return controllers\n  }\n\n  dispatch(name, detail = {}) {\n    return dispatchEvent(this.form, `direct-uploads:${name}`, { detail })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/direct_uploads_controller.js","import { DirectUpload } from \"./direct_upload\"\nimport { dispatchEvent } from \"./helpers\"\n\nexport class DirectUploadController {\n  constructor(input, file) {\n    this.input = input\n    this.file = file\n    this.directUpload = new DirectUpload(this.file, this.url, this)\n    this.dispatch(\"initialize\")\n  }\n\n  start(callback) {\n    const hiddenInput = document.createElement(\"input\")\n    hiddenInput.type = \"hidden\"\n    hiddenInput.name = this.input.name\n    this.input.insertAdjacentElement(\"beforebegin\", hiddenInput)\n\n    this.dispatch(\"start\")\n\n    this.directUpload.create((error, attributes) => {\n      if (error) {\n        hiddenInput.parentNode.removeChild(hiddenInput)\n        this.dispatchError(error)\n      } else {\n        hiddenInput.value = attributes.signed_id\n      }\n\n      this.dispatch(\"end\")\n      callback(error)\n    })\n  }\n\n  uploadRequestDidProgress(event) {\n    const progress = event.loaded / event.total * 100\n    if (progress) {\n      this.dispatch(\"progress\", { progress })\n    }\n  }\n\n  get url() {\n    return this.input.getAttribute(\"data-direct-upload-url\")\n  }\n\n  dispatch(name, detail = {}) {\n    detail.file = this.file\n    detail.id = this.directUpload.id\n    return dispatchEvent(this.input, `direct-upload:${name}`, { detail })\n  }\n\n  dispatchError(error) {\n    const event = this.dispatch(\"error\", { error })\n    if (!event.defaultPrevented) {\n      alert(error)\n    }\n  }\n\n  // DirectUpload delegate\n\n  directUploadWillCreateBlobWithXHR(xhr) {\n    this.dispatch(\"before-blob-request\", { xhr })\n  }\n\n  directUploadWillStoreFileWithXHR(xhr) {\n    this.dispatch(\"before-storage-request\", { xhr })\n    xhr.upload.addEventListener(\"progress\", event => this.uploadRequestDidProgress(event))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/direct_upload_controller.js","import SparkMD5 from \"spark-md5\"\n\nconst fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\n\nexport class FileChecksum {\n  static create(file, callback) {\n    const instance = new FileChecksum(file)\n    instance.create(callback)\n  }\n\n  constructor(file) {\n    this.file = file\n    this.chunkSize = 2097152 // 2MB\n    this.chunkCount = Math.ceil(this.file.size / this.chunkSize)\n    this.chunkIndex = 0\n  }\n\n  create(callback) {\n    this.callback = callback\n    this.md5Buffer = new SparkMD5.ArrayBuffer\n    this.fileReader = new FileReader\n    this.fileReader.addEventListener(\"load\", event => this.fileReaderDidLoad(event))\n    this.fileReader.addEventListener(\"error\", event => this.fileReaderDidError(event))\n    this.readNextChunk()\n  }\n\n  fileReaderDidLoad(event) {\n    this.md5Buffer.append(event.target.result)\n\n    if (!this.readNextChunk()) {\n      const binaryDigest = this.md5Buffer.end(true)\n      const base64digest = btoa(binaryDigest)\n      this.callback(null, base64digest)\n    }\n  }\n\n  fileReaderDidError(event) {\n    this.callback(`Error reading ${this.file.name}`)\n  }\n\n  readNextChunk() {\n    if (this.chunkIndex < this.chunkCount) {\n      const start = this.chunkIndex * this.chunkSize\n      const end = Math.min(start + this.chunkSize, this.file.size)\n      const bytes = fileSlice.call(this.file, start, end)\n      this.fileReader.readAsArrayBuffer(bytes)\n      this.chunkIndex++\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/file_checksum.js","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/spark-md5/spark-md5.js\n// module id = 7\n// module chunks = 0","import { getMetaValue } from \"./helpers\"\n\nexport class BlobRecord {\n  constructor(file, checksum, url) {\n    this.file = file\n\n    this.attributes = {\n      filename: file.name,\n      content_type: file.type,\n      byte_size: file.size,\n      checksum: checksum\n    }\n\n    this.xhr = new XMLHttpRequest\n    this.xhr.open(\"POST\", url, true)\n    this.xhr.responseType = \"json\"\n    this.xhr.setRequestHeader(\"Content-Type\", \"application/json\")\n    this.xhr.setRequestHeader(\"Accept\", \"application/json\")\n    this.xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\")\n    this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"))\n    this.xhr.addEventListener(\"load\", event => this.requestDidLoad(event))\n    this.xhr.addEventListener(\"error\", event => this.requestDidError(event))\n  }\n\n  get status() {\n    return this.xhr.status\n  }\n\n  get response() {\n    const { responseType, response } = this.xhr\n    if (responseType == \"json\") {\n      return response\n    } else {\n      // Shim for IE 11: https://connect.microsoft.com/IE/feedback/details/794808\n      return JSON.parse(response)\n    }\n  }\n\n  create(callback) {\n    this.callback = callback\n    this.xhr.send(JSON.stringify({ blob: this.attributes }))\n  }\n\n  requestDidLoad(event) {\n    if (this.status >= 200 && this.status < 300) {\n      const { response } = this\n      const { direct_upload } = response\n      delete response.direct_upload\n      this.attributes = response\n      this.directUploadData = direct_upload\n      this.callback(null, this.toJSON())\n    } else {\n      this.requestDidError(event)\n    }\n  }\n\n  requestDidError(event) {\n    this.callback(`Error creating Blob for \"${this.file.name}\". Status: ${this.status}`)\n  }\n\n  toJSON() {\n    const result = {}\n    for (const key in this.attributes) {\n      result[key] = this.attributes[key]\n    }\n    return result\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/blob_record.js","export class BlobUpload {\n  constructor(blob) {\n    this.blob = blob\n    this.file = blob.file\n\n    const { url, headers } = blob.directUploadData\n\n    this.xhr = new XMLHttpRequest\n    this.xhr.open(\"PUT\", url, true)\n    this.xhr.responseType = \"text\"\n    for (const key in headers) {\n      this.xhr.setRequestHeader(key, headers[key])\n    }\n    this.xhr.addEventListener(\"load\", event => this.requestDidLoad(event))\n    this.xhr.addEventListener(\"error\", event => this.requestDidError(event))\n  }\n\n  create(callback) {\n    this.callback = callback\n    this.xhr.send(this.file)\n  }\n\n  requestDidLoad(event) {\n    const { status, response } = this.xhr\n    if (status >= 200 && status < 300) {\n      this.callback(null, response)\n    } else {\n      this.requestDidError(event)\n    }\n  }\n\n  requestDidError(event) {\n    this.callback(`Error storing \"${this.file.name}\". Status: ${this.xhr.status}`)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/activestorage/blob_upload.js"],"sourceRoot":""}